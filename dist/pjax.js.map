{"version":3,"file":"pjax.js","sources":["../src/lib/clone.js","../src/lib/foreach-els.js","../src/lib/eval-script.js","../src/lib/execute-scripts.js","../src/lib/uniqueid.js","../src/lib/events/on.js","../src/lib/events/trigger.js","../src/lib/proto/parse-options.js","../src/lib/proto/log.js","../src/lib/proto/get-elements.js","../src/lib/proto/parse-element.js","../src/lib/proto/parse-dom.js","../src/lib/proto/parse-element-unload.js","../src/lib/proto/parse-dom-unload.js","../src/lib/proto/refresh.js","../src/lib/reload.js","../src/lib/polyfills/Function.prototype.bind.js","../src/lib/proto/attach-link.js","../src/lib/proto/attach-form.js","../src/lib/events/off.js","../src/lib/proto/unattach-link.js","../src/lib/proto/unattach-form.js","../src/lib/update-stylesheets.js","../src/lib/foreach-selectors.js","../src/lib/switches.js","../src/lib/switches-selectors.js","../src/lib/request.js","../src/lib/is-supported.js","../src/index.js"],"sourcesContent":["module.exports = function(obj) {\r\n  if (null === obj || \"object\" != typeof obj) {\r\n    return obj\r\n  }\r\n  var copy = obj.constructor()\r\n  for (var attr in obj) {\r\n    if (obj.hasOwnProperty(attr)) {\r\n      copy[attr] = obj[attr]\r\n    }\r\n  }\r\n  return copy\r\n}\r\n","/* global HTMLCollection: true */\r\n\r\nmodule.exports = function(els, fn, context) {\r\n  if (els instanceof HTMLCollection || els instanceof NodeList || els instanceof Array) {\r\n    return Array.prototype.forEach.call(els, fn, context)\r\n  }\r\n  // assume simple dom element\r\n  return fn.call(context, els)\r\n}\r\n","module.exports = function(el) {\r\n  var querySelector = this.options.mainScriptElement;\r\n  var code = (el.text || el.textContent || el.innerHTML || \"\")\r\n  var src = (el.src || \"\");\r\n  var parent = el.parentNode || document.querySelector(querySelector) || document.documentElement\r\n  var script = document.createElement(\"script\")\r\n  var promise = null;\r\n\r\n  this.log(\"Evaluating Script: \", el);\r\n\r\n  if (code.match(\"document.write\")) {\r\n    if (console && this.options.logObject.log) {\r\n      this.options.logObject.log(\"Script contains document.write. Can’t be executed correctly. Code skipped \", el)\r\n    }\r\n    return false\r\n  }\r\n\r\n  promise = new Promise( function(resolve, reject){\r\n\r\n    script.type = \"text/javascript\"\r\n    if (src != \"\") {\r\n      script.src = src;\r\n      script.addEventListener('load', function(){resolve(src);} );\r\n      script.async = true; // force asynchronous loading of peripheral js\r\n    }\r\n\r\n    if (code != \"\") {\r\n      try {\r\n        script.appendChild(document.createTextNode(code))\r\n      }\r\n      catch (e) {\r\n        // old IEs have funky script nodes\r\n        script.text = code\r\n      }\r\n      resolve('text-node');\r\n    }\r\n  });\r\n\r\n  this.log('ParentElement => ', parent );\r\n\r\n  // execute\r\n  parent.appendChild(script);\r\n  parent.removeChild(script)\r\n  // avoid pollution only in head or body tags\r\n  // of if the setting removeScriptsAfterParsing is active\r\n  if( ([\"head\",\"body\"].indexOf( parent.tagName.toLowerCase()) > 0) || (this.options.removeScriptsAfterParsing === true) ) {\r\n  }\r\n\r\n  return promise;\r\n}\r\n","var forEachEls = require(\"./foreach-els\")\r\nvar evalScript = require(\"./eval-script\")\r\n// Finds and executes scripts (used for newly added elements)\r\n// Needed since innerHTML does not run scripts\r\nmodule.exports = function(el) {\r\n\r\n  this.log(\"Executing scripts for \", el);\r\n\r\n  var loadingScripts = [];\r\n\r\n  if(el === undefined) return Promise.resolve();\r\n\r\n  if (el.tagName.toLowerCase() === \"script\") {\r\n    evalScript.call(this, el);\r\n  }\r\n\r\n  forEachEls(el.querySelectorAll(\"script\"), function(script) {\r\n    if (!script.type || script.type.toLowerCase() === \"text/javascript\") {\r\n      // if (script.parentNode) {\r\n      //   script.parentNode.removeChild(script)\r\n      // }\r\n      loadingScripts.push(evalScript.call(this, script));\r\n    }\r\n  }, this);\r\n\r\n  return loadingScripts;\r\n}\r\n","module.exports = (function() {\r\n  var counter = 0\r\n  return function() {\r\n    var id = (\"pjax\" + (new Date().getTime())) + \"_\" + counter\r\n    counter++\r\n    return id\r\n  }\r\n})()\r\n","var forEachEls = require(\"../foreach-els\")\r\n\r\nmodule.exports = function(els, events, listener, useCapture) {\r\n  events = (typeof events === \"string\" ? events.split(\" \") : events)\r\n\r\n  events.forEach(function(e) {\r\n    forEachEls(els, function(el) {\r\n      el.addEventListener(e, listener, useCapture)\r\n    })\r\n  })\r\n}\r\n","var forEachEls = require(\"../foreach-els\")\r\n\r\nmodule.exports = function(els, events, opts) {\r\n  events = (typeof events === \"string\" ? events.split(\" \") : events)\r\n\r\n  events.forEach(function(e) {\r\n    var event // = new CustomEvent(e) // doesn't everywhere yet\r\n    event = document.createEvent(\"HTMLEvents\")\r\n    event.initEvent(e, true, true)\r\n    event.eventName = e\r\n    if (opts) {\r\n      Object.keys(opts).forEach(function(key) {\r\n        event[key] = opts[key]\r\n      })\r\n    }\r\n\r\n    forEachEls(els, function(el) {\r\n      var domFix = false\r\n      if (!el.parentNode && el !== document && el !== window) {\r\n        // THANKS YOU IE (9/10//11 concerned)\r\n        // dispatchEvent doesn't work if element is not in the dom\r\n        domFix = true\r\n        document.body.appendChild(el)\r\n      }\r\n      el.dispatchEvent(event)\r\n      if (domFix) {\r\n        el.parentNode.removeChild(el)\r\n      }\r\n    })\r\n  })\r\n}\r\n","/* global _gaq: true, ga: true */\r\n\r\nmodule.exports = function(options){\r\n  this.options = options\r\n  this.options.elements = this.options.elements || \"a[href], form[action]\",\r\n  this.options.reRenderCSS = this.options.reRenderCSS || false,\r\n  this.options.forceRedirectOnFail = this.options.forceRedirectOnFail || false,\r\n  this.options.scriptloadtimeout = this.options.scriptloadtimeout || 1000,\r\n  this.options.mainScriptElement = this.options.mainScriptElement || \"head\"\r\n  this.options.removeScriptsAfterParsing = this.options.removeScriptsAfterParsing || true\r\n  this.options.logObject = this.options.logObject || console\r\n  this.options.latestChance = this.options.latestChance || null\r\n  this.options.selectors = this.options.selectors || [\"title\", \".js-Pjax\"]\r\n  this.options.switches = this.options.switches || {}\r\n  this.options.switchesOptions = this.options.switchesOptions || {}\r\n  this.options.history = this.options.history || true\r\n  this.options.onDomDiffers = this.options.onDomDiffers || function(oldDom, newDom){\r\n    return true;\r\n  }\r\n  this.options.pjaxErrorHandler = this.options.pjaxErrorHandler || function(href, options, requestData){\r\n    return false;\r\n  }\r\n  this.options.onJsonDocument = this.options.onJsonDocument || function(jsonDocument){\r\n    return true;\r\n  }\r\n  this.options.analytics = this.options.analytics || function() {\r\n    // options.backward or options.foward can be true or undefined\r\n    // by default, we do track back/foward hit\r\n    // https://productforums.google.com/forum/#!topic/analytics/WVwMDjLhXYk\r\n    if (window._gaq) {\r\n      _gaq.push([\"_trackPageview\"])\r\n    }\r\n    if (window.ga) {\r\n      ga(\"send\", \"pageview\", {page: location.pathname, title: document.title})\r\n    }\r\n  }\r\n  this.options.scrollTo = (typeof this.options.scrollTo === 'undefined') ? 0 : this.options.scrollTo;\r\n  this.options.cacheBust = (typeof this.options.cacheBust === 'undefined') ? true : this.options.cacheBust\r\n  this.options.debug = this.options.debug || false\r\n\r\n  // we can’t replace body.outerHTML or head.outerHTML\r\n  // it create a bug where new body or new head are created in the dom\r\n  // if you set head.outerHTML, a new body tag is appended, so the dom get 2 body\r\n  // & it break the switchFallback which replace head & body\r\n  if (!this.options.switches.head) {\r\n    this.options.switches.head = this.switchElementsAlt\r\n  }\r\n  if (!this.options.switches.body) {\r\n    this.options.switches.body = this.switchElementsAlt\r\n  }\r\n  if (typeof options.analytics !== \"function\") {\r\n    options.analytics = function() {}\r\n  }\r\n}\r\n","module.exports = function() {\r\n  if ((this.options.debug && this.options.logObject)) {\r\n    if (typeof this.options.logObject.log === \"function\") {\r\n      this.options.logObject.log.apply(this.options.logObject, ['PJAX ->',arguments]);\r\n    }\r\n    // ie is weird\r\n    else if (this.options.logObject.log) {\r\n      this.options.logObject.log(['PJAX ->',arguments]);\r\n    }\r\n  }\r\n}\r\n","module.exports = function(el) {\r\n  return el.querySelectorAll(this.options.elements)\r\n}\r\n","module.exports = function(el) {\r\n  switch (el.tagName.toLowerCase()) {\r\n  case \"a\":\r\n    // only attach link if el does not already have link attached\r\n    if (!el.hasAttribute('data-pjax-click-state')) {\r\n      this.attachLink(el)\r\n    }\r\n    break\r\n\r\n    case \"form\":\r\n      // only attach link if el does not already have link attached\r\n      if (!el.hasAttribute('data-pjax-click-state')) {\r\n        this.attachForm(el)\r\n      }\r\n    break\r\n\r\n  default:\r\n    throw \"Pjax can only be applied on <a> or <form> submit\"\r\n  }\r\n}\r\n","var forEachEls = require(\"../foreach-els\")\r\n\r\nvar parseElement = require(\"./parse-element\")\r\n\r\nmodule.exports = function(el) {\r\n  forEachEls(this.getElements(el), parseElement, this)\r\n}\r\n","module.exports = function(el) {\r\n  switch (el.tagName.toLowerCase()) {\r\n  case \"a\":\r\n    // only attach link if el does not already have link attached\r\n    if (!el.hasAttribute('data-pjax-click-state')) {\r\n      this.unattachLink(el)\r\n    }\r\n    break\r\n\r\n    case \"form\":\r\n      // only attach link if el does not already have link attached\r\n      if (!el.hasAttribute('data-pjax-click-state')) {\r\n        this.unattachForm(el)\r\n      }\r\n    break\r\n\r\n  default:\r\n    throw \"Pjax can only be applied on <a> or <form> submit\"\r\n  }\r\n}\r\n","var forEachEls = require(\"../foreach-els\")\r\n\r\nvar parseElementUnload = require(\"./parse-element-unload\")\r\n\r\nmodule.exports = function(el) {\r\n  forEachEls(this.getElements(el), parseElementUnload, this)\r\n}\r\n","module.exports = function(el) {\r\n  this.parseDOM(el || document)\r\n}\r\n","module.exports = function() {\r\n  window.location.reload()\r\n}\r\n","if (!Function.prototype.bind) {\r\n  Function.prototype.bind = function(oThis) {\r\n    if (typeof this !== \"function\") {\r\n      // closest thing possible to the ECMAScript 5 internal IsCallable function\r\n      throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\")\r\n    }\r\n\r\n    var aArgs = Array.prototype.slice.call(arguments, 1)\r\n    var that = this\r\n    var Fnoop = function() {}\r\n    var fBound = function() {\r\n      return that.apply(this instanceof Fnoop && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)))\r\n    }\r\n\r\n    Fnoop.prototype = this.prototype\r\n    fBound.prototype = new Fnoop()\r\n\r\n    return fBound\r\n  }\r\n}\r\n","require(\"../polyfills/Function.prototype.bind\")\r\n\r\nvar on = require(\"../events/on\")\r\nvar clone = require(\"../clone\")\r\n\r\nvar attrClick = \"data-pjax-click-state\"\r\nvar attrKey = \"data-pjax-keyup-state\"\r\n\r\nvar linkAction = function(el, event) {\r\n  // Don’t break browser special behavior on links (like page in new window)\r\n  if (event.which > 1 || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\r\n    el.setAttribute(attrClick, \"modifier\")\r\n    return\r\n  }\r\n\r\n  // we do test on href now to prevent unexpected behavior if for some reason\r\n  // user have href that can be dynamically updated\r\n\r\n  // Ignore external links.\r\n  if (el.protocol !== window.location.protocol || el.host !== window.location.host) {\r\n    el.setAttribute(attrClick, \"external\")\r\n    return\r\n  }\r\n\r\n  // Ignore click if we are on an anchor on the same page\r\n  if (el.pathname === window.location.pathname && el.hash.length > 0) {\r\n    el.setAttribute(attrClick, \"anchor-present\")\r\n    return\r\n  }\r\n\r\n  // Ignore anchors on the same page (keep native behavior)\r\n  if (el.hash && el.href.replace(el.hash, \"\") === window.location.href.replace(location.hash, \"\")) {\r\n    el.setAttribute(attrClick, \"anchor\")\r\n    return\r\n  }\r\n\r\n  // Ignore empty anchor \"foo.html#\"\r\n  if (el.href === window.location.href.split(\"#\")[0] + \"#\") {\r\n    el.setAttribute(attrClick, \"anchor-empty\")\r\n    return\r\n  }\r\n\r\n  event.preventDefault()\r\n\r\n  // don’t do \"nothing\" if user try to reload the page by clicking the same link twice\r\n  if (\r\n    this.options.currentUrlFullReload &&\r\n    el.href === window.location.href.split(\"#\")[0]\r\n  ) {\r\n    el.setAttribute(attrClick, \"reload\")\r\n    this.reload()\r\n    return\r\n  }\r\n  this.options.requestOptions = this.options.requestOptions || {};\r\n  el.setAttribute(attrClick, \"load\")\r\n  this.loadUrl(el.href, clone(this.options))\r\n}\r\n\r\nvar isDefaultPrevented = function(event) {\r\n  return event.defaultPrevented || event.returnValue === false;\r\n}\r\n\r\nmodule.exports = function(el) {\r\n  var that = this\r\n\r\n  on(el, \"click\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n    linkAction.call(that, el, event)\r\n  })\r\n\r\n  on(el, \"keyup\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n    // Don’t break browser special behavior on links (like page in new window)\r\n    if (event.which > 1 || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\r\n      el.setAttribute(attrKey, \"modifier\")\r\n      return\r\n    }\r\n\r\n    if (event.keyCode == 13) {\r\n      linkAction.call(that, el, event)\r\n    }\r\n  }.bind(this))\r\n}\r\n","require(\"../polyfills/Function.prototype.bind\")\r\n\r\nvar on = require(\"../events/on\")\r\nvar clone = require(\"../clone\")\r\n\r\nvar attrClick = \"data-pjax-submit-state\"\r\n\r\nvar formAction = function(el, event){\r\n\r\n  this.options.requestOptions = {\r\n    requestUrl : el.getAttribute('action') || window.location.href,\r\n    requestMethod : el.getAttribute('method') || 'GET',\r\n  }\r\n\r\n  //create a testable virtual link of the form action\r\n  var virtLinkElement = document.createElement('a');\r\n  virtLinkElement.setAttribute('href', this.options.requestOptions.requestUrl);\r\n\r\n  // Ignore external links.\r\n  if (virtLinkElement.protocol !== window.location.protocol || virtLinkElement.host !== window.location.host) {\r\n    el.setAttribute(attrClick, \"external\");\r\n    return\r\n  }\r\n\r\n  // Ignore click if we are on an anchor on the same page\r\n  if (virtLinkElement.pathname === window.location.pathname && virtLinkElement.hash.length > 0) {\r\n    el.setAttribute(attrClick, \"anchor-present\");\r\n    return\r\n  }\r\n\r\n  // Ignore empty anchor \"foo.html#\"\r\n  if (virtLinkElement.href === window.location.href.split(\"#\")[0] + \"#\") {\r\n    el.setAttribute(attrClick, \"anchor-empty\")\r\n    return\r\n  }\r\n\r\n  // if declared as a full reload, just normally submit the form\r\n  if ( this.options.currentUrlFullReload) {\r\n    el.setAttribute(attrClick, \"reload\");\r\n    return;\r\n  }\r\n\r\n  event.preventDefault()\r\n  var nameList = [];\r\n  var paramObject = [];\r\n  for(var elementKey in el.elements) {\r\n    var element = el.elements[elementKey];\r\n    if (!!element.name && element.attributes !== undefined && element.tagName.toLowerCase() !== 'button'){\r\n      \r\n      if (\r\n        (element.type !== 'checkbox' && element.type !== 'radio') || element.checked\r\n      ) {\r\n        if(nameList.indexOf(element.name) === -1){\r\n          nameList.push(element.name);\r\n          \r\n          if (String(element.nodeName).toLowerCase() === 'select' && element.multiple == true) {\r\n            var selected = Array.from(element.options).map(function(item,i) { return (item.selected ? item.value : null) });\r\n            paramObject.push({ name: encodeURIComponent(element.name), value: selected});\r\n            return;\r\n          } \r\n\r\n          paramObject.push({ name: encodeURIComponent(element.name), value: encodeURIComponent(element.value)});\r\n          \r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  //Creating a getString\r\n  var paramsString = (paramObject.map(function(value){return value.name+\"=\"+value.value;})).join('&');\r\n\r\n  this.options.requestOptions.requestPayload = paramObject;\r\n  this.options.requestOptions.requestPayloadString = paramsString;\r\n\r\n  el.setAttribute(attrClick, \"submit\");\r\n\r\n  this.loadUrl(virtLinkElement.href, clone(this.options))\r\n\r\n};\r\n\r\nvar isDefaultPrevented = function(event) {\r\n  return event.defaultPrevented || event.returnValue === false;\r\n};\r\n\r\n\r\nmodule.exports = function(el) {\r\n  var that = this\r\n\r\n  on(el, \"submit\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n    formAction.call(that, el, event)\r\n  })\r\n}\r\n","var forEachEls = require(\"../foreach-els\")\r\n\r\nmodule.exports = function(els, events, listener, useCapture) {\r\n  events = (typeof events === \"string\" ? events.split(\" \") : events)\r\n\r\n  events.forEach(function(e) {\r\n    forEachEls(els, function(el) {\r\n      el.removeEventListener(e, listener, useCapture)\r\n    })\r\n  })\r\n}\r\n","require(\"../polyfills/Function.prototype.bind\")\r\n\r\nvar off = require(\"../events/off\")\r\nvar clone = require(\"../clone\")\r\n\r\nvar attrClick = \"data-pjax-click-state\"\r\nvar attrKey = \"data-pjax-keyup-state\"\r\n\r\nvar linkAction = function(el, event) {\r\n  // Don’t break browser special behavior on links (like page in new window)\r\n  if (event.which > 1 || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\r\n    el.setAttribute(attrClick, \"modifier\")\r\n    return\r\n  }\r\n\r\n  // we do test on href now to prevent unexpected behavior if for some reason\r\n  // user have href that can be dynamically updated\r\n\r\n  // Ignore external links.\r\n  if (el.protocol !== window.location.protocol || el.host !== window.location.host) {\r\n    el.setAttribute(attrClick, \"external\")\r\n    return\r\n  }\r\n\r\n  // Ignore click if we are on an anchor on the same page\r\n  if (el.pathname === window.location.pathname && el.hash.length > 0) {\r\n    el.setAttribute(attrClick, \"anchor-present\")\r\n    return\r\n  }\r\n\r\n  // Ignore anchors on the same page (keep native behavior)\r\n  if (el.hash && el.href.replace(el.hash, \"\") === window.location.href.replace(location.hash, \"\")) {\r\n    el.setAttribute(attrClick, \"anchor\")\r\n    return\r\n  }\r\n\r\n  // Ignore empty anchor \"foo.html#\"\r\n  if (el.href === window.location.href.split(\"#\")[0] + \"#\") {\r\n    el.setAttribute(attrClick, \"anchor-empty\")\r\n    return\r\n  }\r\n\r\n  event.preventDefault()\r\n\r\n  // don’t do \"nothing\" if user try to reload the page by clicking the same link twice\r\n  if (\r\n    this.options.currentUrlFullReload &&\r\n    el.href === window.location.href.split(\"#\")[0]\r\n  ) {\r\n    el.setAttribute(attrClick, \"reload\")\r\n    this.reload()\r\n    return\r\n  }\r\n  this.options.requestOptions = this.options.requestOptions || {};\r\n  el.setAttribute(attrClick, \"load\")\r\n  this.loadUrl(el.href, clone(this.options))\r\n}\r\n\r\nvar isDefaultPrevented = function(event) {\r\n  return event.defaultPrevented || event.returnValue === false;\r\n}\r\n\r\nmodule.exports = function(el) {\r\n  var that = this\r\n\r\n  off(el, \"click\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n    linkAction.call(that, el, event)\r\n  })\r\n\r\n  off(el, \"keyup\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n    // Don’t break browser special behavior on links (like page in new window)\r\n    if (event.which > 1 || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\r\n      el.setAttribute(attrKey, \"modifier\")\r\n      return\r\n    }\r\n\r\n    if (event.keyCode == 13) {\r\n      linkAction.call(that, el, event)\r\n    }\r\n  }.bind(this))\r\n}\r\n","require(\"../polyfills/Function.prototype.bind\")\r\n\r\nvar off = require(\"../events/off\")\r\nvar clone = require(\"../clone\")\r\n\r\nvar attrClick = \"data-pjax-click-state\"\r\n\r\nvar formAction = function(el, event){\r\n\r\n  this.options.requestOptions = {\r\n    requestUrl : el.getAttribute('action') || window.location.href,\r\n    requestMethod : el.getAttribute('method') || 'GET',\r\n  }\r\n\r\n  //create a testable virtual link of the form action\r\n  var virtLinkElement = document.createElement('a');\r\n  virtLinkElement.setAttribute('href', this.options.requestOptions.requestUrl);\r\n\r\n  // Ignore external links.\r\n  if (virtLinkElement.protocol !== window.location.protocol || virtLinkElement.host !== window.location.host) {\r\n    el.setAttribute(attrClick, \"external\");\r\n    return\r\n  }\r\n\r\n  // Ignore click if we are on an anchor on the same page\r\n  if (virtLinkElement.pathname === window.location.pathname && virtLinkElement.hash.length > 0) {\r\n    el.setAttribute(attrClick, \"anchor-present\");\r\n    return\r\n  }\r\n\r\n  // Ignore empty anchor \"foo.html#\"\r\n  if (virtLinkElement.href === window.location.href.split(\"#\")[0] + \"#\") {\r\n    el.setAttribute(attrClick, \"anchor-empty\")\r\n    return\r\n  }\r\n\r\n  // if declared as a full reload, just normally submit the form\r\n  if ( this.options.currentUrlFullReload) {\r\n    el.setAttribute(attrClick, \"reload\");\r\n    return;\r\n  }\r\n\r\n  event.preventDefault()\r\n  var nameList = [];\r\n  var paramObject = [];\r\n  for(var elementKey in el.elements) {\r\n    var element = el.elements[elementKey];\r\n    if (!!element.name && element.attributes !== undefined && element.tagName.toLowerCase() !== 'button'){\r\n      if (\r\n        (element.type !== 'checkbox' && element.type !== 'radio') || element.checked\r\n      ) {\r\n        if(nameList.indexOf(element.name) === -1){\r\n          nameList.push(element.name);\r\n          paramObject.push({ name: encodeURIComponent(element.name), value: encodeURIComponent(element.value)});\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  //Creating a getString\r\n  var paramsString = (paramObject.map(function(value){return value.name+\"=\"+value.value;})).join('&');\r\n\r\n  this.options.requestOptions.requestPayload = paramObject;\r\n  this.options.requestOptions.requestPayloadString = paramsString;\r\n\r\n  el.setAttribute(attrClick, \"submit\");\r\n\r\n  this.loadUrl(virtLinkElement.href, clone(this.options))\r\n\r\n};\r\n\r\nvar isDefaultPrevented = function(event) {\r\n  return event.defaultPrevented || event.returnValue === false;\r\n};\r\n\r\n\r\nmodule.exports = function(el) {\r\n  var that = this\r\n\r\n  off(el, \"submit\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n    formAction.call(that, el, event)\r\n  })\r\n\r\n  off(el, \"keyup\", function(event) {\r\n    if (isDefaultPrevented(event)) {\r\n      return\r\n    }\r\n\r\n\r\n    if (event.keyCode == 13) {\r\n      formAction.call(that, el, event)\r\n    }\r\n  }.bind(this))\r\n}\r\n","var forEachEls = require(\"./foreach-els\")\r\n\r\nmodule.exports = function(elements, oldElements) {\r\n   this.log(\"styleheets old elements\", oldElements);\r\n   this.log(\"styleheets new elements\", elements);\r\n  var toArray = function(enumerable){\r\n      var arr = [];\r\n      for(var i = enumerable.length; i--; arr.unshift(enumerable[i]));\r\n      return arr;\r\n  };\r\n  forEachEls(elements, function(newEl, i) {\r\n    var oldElementsArray = toArray(oldElements);\r\n    var resemblingOld = oldElementsArray.reduce(function(acc, oldEl){\r\n      acc = ((oldEl.href === newEl.href) ? oldEl : acc);\r\n      return acc;\r\n    }, null);\r\n\r\n    if(resemblingOld !== null){\r\n      if (this.log) {\r\n        this.log(\"old stylesheet found not resetting\");\r\n      }\r\n    } else {\r\n      if (this.log) {\r\n        this.log(\"new stylesheet => add to head\");\r\n      }\r\n      var head = document.getElementsByTagName( 'head' )[0],\r\n       link = document.createElement( 'link' );\r\n        link.setAttribute( 'href', newEl.href );\r\n        link.setAttribute( 'rel', 'stylesheet' );\r\n        link.setAttribute( 'type', 'text/css' );\r\n        head.appendChild(link);\r\n    }\r\n  }, this);\r\n\r\n}\r\n","var forEachEls = require(\"./foreach-els\")\r\n\r\nmodule.exports = function(selectors, cb, context, DOMcontext) {\r\n  DOMcontext = DOMcontext || document\r\n  selectors.forEach(function(selector) {\r\n    forEachEls(DOMcontext.querySelectorAll(selector), cb, context)\r\n  })\r\n}\r\n","var on = require(\"./events/on.js\")\r\n// var off = require(\"./lib/events/on.js\")\r\n// var trigger = require(\"./lib/events/trigger.js\")\r\n\r\n\r\nmodule.exports = {\r\n  outerHTML: function(oldEl, newEl) {\r\n    oldEl.outerHTML = newEl.outerHTML\r\n    this.onSwitch()\r\n  },\r\n\r\n  innerHTML: function(oldEl, newEl) {\r\n    oldEl.innerHTML = newEl.innerHTML\r\n    oldEl.className = newEl.className\r\n    this.onSwitch()\r\n  },\r\n\r\n  sideBySide: function(oldEl, newEl, options, switchOptions) {\r\n    var forEach = Array.prototype.forEach\r\n    var elsToRemove = []\r\n    var elsToAdd = []\r\n    var fragToAppend = document.createDocumentFragment()\r\n    // height transition are shitty on safari\r\n    // so commented for now (until I found something ?)\r\n    // var relevantHeight = 0\r\n    var animationEventNames = \"animationend webkitAnimationEnd MSAnimationEnd oanimationend\"\r\n    var animatedElsNumber = 0\r\n    var sexyAnimationEnd = function(e) {\r\n          if (e.target != e.currentTarget) {\r\n            // end triggered by an animation on a child\r\n            return\r\n          }\r\n\r\n          animatedElsNumber--\r\n          if (animatedElsNumber <= 0 && elsToRemove) {\r\n            elsToRemove.forEach(function(el) {\r\n              // browsing quickly can make the el\r\n              // already removed by last page update ?\r\n              if (el.parentNode) {\r\n                el.parentNode.removeChild(el)\r\n              }\r\n            })\r\n\r\n            elsToAdd.forEach(function(el) {\r\n              el.className = el.className.replace(el.getAttribute(\"data-pjax-classes\"), \"\")\r\n              el.removeAttribute(\"data-pjax-classes\")\r\n              // Pjax.off(el, animationEventNames, sexyAnimationEnd, true)\r\n            })\r\n\r\n            elsToAdd = null // free memory\r\n            elsToRemove = null // free memory\r\n\r\n            // assume the height is now useless (avoid bug since there is overflow hidden on the parent)\r\n            // oldEl.style.height = \"auto\"\r\n\r\n            // this is to trigger some repaint (example: picturefill)\r\n            this.onSwitch()\r\n            // Pjax.trigger(window, \"scroll\")\r\n          }\r\n        }.bind(this)\r\n\r\n    // Force height to be able to trigger css animation\r\n    // here we get the relevant height\r\n    // oldEl.parentNode.appendChild(newEl)\r\n    // relevantHeight = newEl.getBoundingClientRect().height\r\n    // oldEl.parentNode.removeChild(newEl)\r\n    // oldEl.style.height = oldEl.getBoundingClientRect().height + \"px\"\r\n\r\n    switchOptions = switchOptions || {}\r\n\r\n    forEach.call(oldEl.childNodes, function(el) {\r\n      elsToRemove.push(el)\r\n      if (el.classList && !el.classList.contains(\"js-Pjax-remove\")) {\r\n        // for fast switch, clean element that just have been added, & not cleaned yet.\r\n        if (el.hasAttribute(\"data-pjax-classes\")) {\r\n          el.className = el.className.replace(el.getAttribute(\"data-pjax-classes\"), \"\")\r\n          el.removeAttribute(\"data-pjax-classes\")\r\n        }\r\n        el.classList.add(\"js-Pjax-remove\")\r\n        if (switchOptions.callbacks && switchOptions.callbacks.removeElement) {\r\n          switchOptions.callbacks.removeElement(el)\r\n        }\r\n        if (switchOptions.classNames) {\r\n          el.className += \" \" + switchOptions.classNames.remove + \" \" + (options.backward ? switchOptions.classNames.backward : switchOptions.classNames.forward)\r\n        }\r\n        animatedElsNumber++\r\n        on(el, animationEventNames, sexyAnimationEnd, true)\r\n      }\r\n    })\r\n\r\n    forEach.call(newEl.childNodes, function(el) {\r\n      if (el.classList) {\r\n        var addClasses = \"\"\r\n        if (switchOptions.classNames) {\r\n          addClasses = \" js-Pjax-add \" + switchOptions.classNames.add + \" \" + (options.backward ? switchOptions.classNames.forward : switchOptions.classNames.backward)\r\n        }\r\n        if (switchOptions.callbacks && switchOptions.callbacks.addElement) {\r\n          switchOptions.callbacks.addElement(el)\r\n        }\r\n        el.className += addClasses\r\n        el.setAttribute(\"data-pjax-classes\", addClasses)\r\n        elsToAdd.push(el)\r\n        fragToAppend.appendChild(el)\r\n        animatedElsNumber++\r\n        on(el, animationEventNames, sexyAnimationEnd, true)\r\n      }\r\n    })\r\n\r\n    // pass all className of the parent\r\n    oldEl.className = newEl.className\r\n    oldEl.appendChild(fragToAppend)\r\n\r\n    // oldEl.style.height = relevantHeight + \"px\"\r\n  }\r\n}\r\n","var forEachEls = require(\"./foreach-els\")\r\n\r\nvar defaultSwitches = require(\"./switches\")\r\n\r\nmodule.exports = function(switches, switchesOptions, selectors, fromEl, toEl, options) {\r\n  selectors.forEach(function(selector) {\r\n    var newEls = fromEl.querySelectorAll(selector)\r\n    var oldEls = toEl.querySelectorAll(selector)\r\n    if (this.log) {\r\n      this.log(\"Pjax switch\", selector, newEls, oldEls)\r\n    }\r\n    if (newEls.length !== oldEls.length) {\r\n      var throwError = options.onDomDiffers(toEl, fromEl);\r\n      if(throwError) {\r\n        throw \"DOM doesn’t look the same on new loaded page: ’\" + selector + \"’ - new \" + newEls.length + \", old \" + oldEls.length;\r\n      }\r\n    }\r\n\r\n    forEachEls(newEls, function(newEl, i) {\r\n      var oldEl = oldEls[i]\r\n      if (this.log) {\r\n        this.log(\"newEl\", newEl, \"oldEl\", oldEl)\r\n      }\r\n      if (switches[selector]) {\r\n        switches[selector].bind(this)(oldEl, newEl, options, switchesOptions[selector])\r\n      }\r\n      else {\r\n        defaultSwitches.outerHTML.bind(this)(oldEl, newEl, options)\r\n      }\r\n    }, this)\r\n  }, this)\r\n}\r\n","module.exports = function(location, options, callback) {\r\n  options = options || {};\r\n  var requestMethod = options.requestMethod || \"GET\";\r\n  var requestPayload = options.requestPayloadString || null;\r\n  var request = new XMLHttpRequest()\r\n\r\n  request.onreadystatechange = function() {\r\n    if (request.readyState === 4) {\r\n      if (request.status === 200) {\r\n        callback(request.responseText, request)\r\n      }\r\n      else {\r\n        callback(null, request)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add a timestamp as part of the query string if cache busting is enabled\r\n  if (this.options.cacheBust) {\r\n    location += (!/[?&]/.test(location) ? \"?\" : \"&\") + new Date().getTime()\r\n  }\r\n\r\n  request.open(requestMethod.toUpperCase(), location, true)\r\n  request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\")\r\n\r\n  // Add the request payload if available\r\n  if (options.requestPayloadString != undefined && options.requestPayloadString != \"\") {\r\n    // Send the proper header information along with the request\r\n    request.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n  }\r\n\r\n  request.send(requestPayload)\r\n\r\n  return request\r\n}\r\n","module.exports = function() {\r\n  // Borrowed wholesale from https://github.com/defunkt/jquery-pjax\r\n  return window.history &&\r\n    window.history.pushState &&\r\n    window.history.replaceState &&\r\n    // pushState isn’t reliable on iOS until 5.\r\n    !navigator.userAgent.match(/((iPod|iPhone|iPad).+\\bOS\\s+[1-4]\\D|WebApps\\/.+CFNetwork)/)\r\n}\r\n","var clone = require('./lib/clone.js')\r\nvar executeScripts = require('./lib/execute-scripts.js')\r\nvar forEachEls = require(\"./lib/foreach-els.js\")\r\nvar newUid = require(\"./lib/uniqueid.js\")\r\n\r\nvar on = require(\"./lib/events/on.js\")\r\n// var off = require(\"./lib/events/on.js\")\r\nvar trigger = require(\"./lib/events/trigger.js\")\r\n\r\n\r\nvar Pjax = function(options) {\r\n    this.firstrun = true\r\n\r\n    var parseOptions = require(\"./lib/proto/parse-options.js\");\r\n    parseOptions.apply(this,[options])\r\n    this.log(\"Pjax options\", this.options)\r\n\r\n    this.maxUid = this.lastUid = newUid()\r\n\r\n    this.parseDOM(document)\r\n\r\n    on(window, \"popstate\", function(st) {\r\n      if (st.state) {\r\n        var opt = clone(this.options)\r\n        opt.url = st.state.url\r\n        opt.title = st.state.title\r\n        opt.history = false\r\n        opt.requestOptions = {};\r\n        if (st.state.uid < this.lastUid) {\r\n          opt.backward = true\r\n        }\r\n        else {\r\n          opt.forward = true\r\n        }\r\n        this.lastUid = st.state.uid\r\n\r\n        // @todo implement history cache here, based on uid\r\n        this.loadUrl(st.state.url, opt)\r\n      }\r\n    }.bind(this));\r\n\r\n    return this;\r\n  }\r\n\r\nPjax.prototype = {\r\n  log: require(\"./lib/proto/log.js\"),\r\n\r\n  getElements: require(\"./lib/proto/get-elements.js\"),\r\n\r\n  parseDOM: require(\"./lib/proto/parse-dom.js\"),\r\n\r\n  parseDOMtoUnload: require(\"./lib/proto/parse-dom-unload.js\"),\r\n\r\n  refresh: require(\"./lib/proto/refresh.js\"),\r\n\r\n  reload: require(\"./lib/reload.js\"),\r\n\r\n  attachLink: require(\"./lib/proto/attach-link.js\"),\r\n\r\n  attachForm: require(\"./lib/proto/attach-form.js\"),\r\n\r\n  unattachLink: require(\"./lib/proto/unattach-link.js\"),\r\n\r\n  unattachForm: require(\"./lib/proto/unattach-form.js\"),\r\n\r\n  updateStylesheets: require(\"./lib/update-stylesheets.js\"),\r\n\r\n  forEachSelectors: function(cb, context, DOMcontext) {\r\n    return require(\"./lib/foreach-selectors.js\").bind(this)(this.options.selectors, cb, context, DOMcontext)\r\n  },\r\n\r\n  switchSelectors: function(selectors, fromEl, toEl, options) {\r\n    return require(\"./lib/switches-selectors.js\").bind(this)(this.options.switches, this.options.switchesOptions, selectors, fromEl, toEl, options)\r\n  },\r\n\r\n  // too much problem with the code below\r\n  // + it’s too dangerous\r\n//   switchFallback: function(fromEl, toEl) {\r\n//     this.switchSelectors([\"head\", \"body\"], fromEl, toEl)\r\n//     // execute script when DOM is like it should be\r\n//     Pjax.executeScripts(document.querySelector(\"head\"))\r\n//     Pjax.executeScripts(document.querySelector(\"body\"))\r\n//   }\r\n\r\n  latestChance: function(href) {\r\n      window.location.href = href;\r\n      return false;\r\n  },\r\n\r\n  onSwitch: function() {\r\n    trigger(window, \"resize scroll\")\r\n  },\r\n\r\n  loadContent: function(html, options) {\r\n    var tmpEl = document.implementation.createHTMLDocument(\"pjax\")\r\n    var collectForScriptcomplete = [\r\n      (Promise.resolve(\"basic resolve\"))\r\n    ];\r\n\r\n    // parse HTML attributes to copy them\r\n    // since we are forced to use documentElement.innerHTML (outerHTML can't be used for <html>)\r\n    var htmlRegex = /<html[^>]+>/gi\r\n    var htmlAttribsRegex = /\\s?[a-z:]+(?:\\=(?:\\'|\\\")[^\\'\\\">]+(?:\\'|\\\"))*/gi\r\n    var matches = html.match(htmlRegex)\r\n    if (matches && matches.length) {\r\n      matches = matches[0].match(htmlAttribsRegex)\r\n      if (matches.length) {\r\n        matches.shift()\r\n        matches.forEach(function(htmlAttrib) {\r\n          var attr = htmlAttrib.trim().split(\"=\")\r\n          if (attr.length === 1) {\r\n            tmpEl.documentElement.setAttribute(attr[0], true)\r\n          }\r\n          else {\r\n            tmpEl.documentElement.setAttribute(attr[0], attr[1].slice(1, -1))\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    jsonContent = null;\r\n    try{\r\n      jsonContent = JSON.parse(html);\r\n    } catch(e) {}\r\n\r\n    tmpEl.documentElement.innerHTML = html\r\n    this.log(\"load content\", tmpEl.documentElement.attributes, tmpEl.documentElement.innerHTML.length)\r\n\r\n    if(jsonContent !== null) {\r\n      this.log(\"found JSON document\", jsonContent);\r\n      this.options.onJsonDocument.call(this, jsonContent);  \r\n    }\r\n\r\n    // Clear out any focused controls before inserting new page contents.\r\n    // we clear focus on non form elements\r\n    if (document.activeElement && !document.activeElement.value) {\r\n      try {\r\n        document.activeElement.blur()\r\n      } catch (e) { }\r\n    }\r\n\r\n    this.switchSelectors(this.options.selectors, tmpEl, document, options)\r\n\r\n    //reset stylesheets if activated\r\n    if(this.options.reRenderCSS === true){\r\n      this.updateStylesheets.call(this, tmpEl.querySelectorAll('link[rel=stylesheet]'), document.querySelectorAll('link[rel=stylesheet]'));\r\n    }\r\n\r\n    // FF bug: Won’t autofocus fields that are inserted via JS.\r\n    // This behavior is incorrect. So if theres no current focus, autofocus\r\n    // the last field.\r\n    //\r\n    // http://www.w3.org/html/wg/drafts/html/master/forms.html\r\n    var autofocusEl = Array.prototype.slice.call(document.querySelectorAll(\"[autofocus]\")).pop()\r\n    if (autofocusEl && document.activeElement !== autofocusEl) {\r\n      autofocusEl.focus();\r\n    }\r\n\r\n    // execute scripts when DOM have been completely updated\r\n    this.options.selectors.forEach( function(selector) {\r\n      forEachEls(document.querySelectorAll(selector), function(el) {\r\n\r\n        collectForScriptcomplete.push.apply(collectForScriptcomplete, executeScripts.call(this, el));\r\n\r\n      }, this);\r\n\r\n    },this);\r\n    // }\r\n    // catch(e) {\r\n    //   if (this.options.debug) {\r\n    //     this.log(\"Pjax switch fail: \", e)\r\n    //   }\r\n    //   this.switchFallback(tmpEl, document)\r\n    // }\r\n    this.log(\"waiting for scriptcomplete\",collectForScriptcomplete);\r\n\r\n    //Fallback! If something can't be loaded or is not loaded correctly -> just force eventing in error\r\n    var timeOutScriptEvent = null;\r\n    timeOutScriptEvent = window.setTimeout( function(){\r\n      trigger(document,\"pjax:scriptcomplete pjax:scripttimeout\", options)\r\n      timeOutScriptEvent = null;\r\n    }, this.options.scriptloadtimeout);\r\n\r\n    Promise.all(collectForScriptcomplete).then(\r\n      //resolved\r\n      function(){\r\n        if(timeOutScriptEvent !== null ){\r\n          window.clearTimeout(timeOutScriptEvent);\r\n          trigger(document,\"pjax:scriptcomplete pjax:scriptsuccess\", options)\r\n        }\r\n      },\r\n      function(){\r\n        if(timeOutScriptEvent !== null ){\r\n          window.clearTimeout(timeOutScriptEvent);\r\n          trigger(document,\"pjax:scriptcomplete pjax:scripterror\", options)\r\n        }\r\n      }\r\n    );\r\n\r\n\r\n  },\r\n\r\n  doRequest: require(\"./lib/request.js\"),\r\n\r\n  loadUrl: function(href, options) {\r\n    this.log(\"load href\", href, options)\r\n\r\n    trigger(document, \"pjax:send\", options);\r\n\r\n    // Do the request\r\n    this.doRequest(href, options.requestOptions, function(html, requestData) {\r\n      // Fail if unable to load HTML via AJAX\r\n      if (html === false || requestData.status !== 200) {\r\n        trigger(document,\"pjax:complete pjax:error\", {options: options, requestData: requestData, href: href});\r\n        return options.pjaxErrorHandler(href, options, requestData);\r\n      }\r\n\r\n      // Clear out any focused controls before inserting new page contents.\r\n      document.activeElement.blur()\r\n\r\n      try {\r\n        this.loadContent(html, options)\r\n      }\r\n      catch (e) {\r\n        if (!this.options.debug) {\r\n          if (console && this.options.logObject.error) {\r\n            this.options.logObject.error(\"Pjax switch fail: \", e)\r\n          }\r\n          return options.pjaxErrorHandler(href, options, requestData) || this.latestChance(href);\r\n        }\r\n        else {\r\n          if (this.options.forceRedirectOnFail) {\r\n            return options.pjaxErrorHandler(href, options, requestData) || this.latestChance(href);\r\n          }\r\n          throw e;\r\n        }\r\n      }\r\n\r\n      if (options.history) {\r\n        if (this.firstrun) {\r\n          this.lastUid = this.maxUid = newUid()\r\n          this.firstrun = false\r\n          window.history.replaceState({\r\n            url: window.location.href,\r\n            title: document.title,\r\n            uid: this.maxUid\r\n          },\r\n          document.title)\r\n        }\r\n\r\n        // Update browser history\r\n        this.lastUid = this.maxUid = newUid()\r\n        window.history.pushState({\r\n          url: href,\r\n          title: options.title,\r\n          uid: this.maxUid\r\n        },\r\n          options.title,\r\n          href)\r\n      }\r\n\r\n      this.forEachSelectors(function(el) {\r\n        this.parseDOM(el)\r\n      }, this)\r\n\r\n      // Fire Events\r\n      trigger(document,\"pjax:complete pjax:success\", options)\r\n\r\n      options.analytics()\r\n\r\n      // Scroll page to top on new page load\r\n      if (options.scrollTo !== false) {\r\n        if (options.scrollTo.length > 1) {\r\n          window.scrollTo(options.scrollTo[0], options.scrollTo[1])\r\n        }\r\n        else {\r\n          window.scrollTo(0, options.scrollTo)\r\n        }\r\n      }\r\n    }.bind(this))\r\n  }\r\n}\r\n\r\nPjax.isSupported = require(\"./lib/is-supported.js\");\r\n\r\n//arguably could do `if( require(\"./lib/is-supported.js\")()) {` but that might be a little to simple\r\nif (Pjax.isSupported()) {\r\n  module.exports = Pjax\r\n}\r\n// if there isn’t required browser functions, returning stupid api\r\nelse {\r\n  var stupidPjax = function() {}\r\n  for (var key in Pjax.prototype) {\r\n    if (Pjax.prototype.hasOwnProperty(key) && typeof Pjax.prototype[key] === \"function\") {\r\n      stupidPjax[key] = stupidPjax\r\n    }\r\n  }\r\n\r\n  module.exports = stupidPjax\r\n}\r\n"],"names":["module","obj","copy","constructor","attr","hasOwnProperty","els","fn","context","HTMLCollection","NodeList","Array","prototype","forEach","call","el","querySelector","options","mainScriptElement","code","text","textContent","innerHTML","src","parent","parentNode","document","documentElement","script","createElement","promise","log","match","console","logObject","Promise","resolve","reject","type","addEventListener","async","appendChild","createTextNode","e","removeChild","indexOf","tagName","toLowerCase","removeScriptsAfterParsing","loadingScripts","undefined","evalScript","forEachEls","querySelectorAll","push","counter","id","Date","getTime","events","listener","useCapture","split","opts","event","createEvent","initEvent","eventName","Object","keys","key","domFix","window","body","dispatchEvent","elements","reRenderCSS","forceRedirectOnFail","scriptloadtimeout","latestChance","selectors","switches","switchesOptions","history","onDomDiffers","oldDom","newDom","pjaxErrorHandler","href","requestData","onJsonDocument","jsonDocument","analytics","_gaq","ga","page","location","pathname","title","scrollTo","cacheBust","debug","head","switchElementsAlt","apply","arguments","hasAttribute","attachLink","attachForm","getElements","parseElement","unattachLink","unattachForm","parseElementUnload","parseDOM","reload","Function","bind","oThis","TypeError","aArgs","slice","that","Fnoop","fBound","concat","attrClick","attrKey","linkAction","which","metaKey","ctrlKey","shiftKey","altKey","setAttribute","protocol","host","hash","length","replace","preventDefault","currentUrlFullReload","requestOptions","loadUrl","clone","isDefaultPrevented","defaultPrevented","returnValue","on","keyCode","formAction","requestUrl","getAttribute","requestMethod","virtLinkElement","nameList","paramObject","elementKey","element","name","attributes","checked","String","nodeName","multiple","selected","from","map","item","i","value","encodeURIComponent","paramsString","join","requestPayload","requestPayloadString","removeEventListener","off","oldElements","toArray","enumerable","arr","unshift","newEl","oldElementsArray","resemblingOld","reduce","acc","oldEl","getElementsByTagName","link","cb","DOMcontext","selector","outerHTML","onSwitch","className","sideBySide","switchOptions","elsToRemove","elsToAdd","fragToAppend","createDocumentFragment","animationEventNames","animatedElsNumber","sexyAnimationEnd","target","currentTarget","removeAttribute","childNodes","classList","contains","add","callbacks","removeElement","classNames","remove","backward","forward","addClasses","addElement","fromEl","toEl","newEls","oldEls","throwError","defaultSwitches","callback","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","test","open","toUpperCase","setRequestHeader","send","pushState","replaceState","navigator","userAgent","Pjax","firstrun","parseOptions","require","maxUid","lastUid","newUid","st","state","opt","url","uid","parseDOMtoUnload","refresh","updateStylesheets","forEachSelectors","switchSelectors","trigger","loadContent","html","tmpEl","implementation","createHTMLDocument","collectForScriptcomplete","htmlRegex","htmlAttribsRegex","matches","shift","htmlAttrib","trim","jsonContent","JSON","parse","activeElement","blur","autofocusEl","pop","focus","executeScripts","timeOutScriptEvent","setTimeout","all","then","clearTimeout","doRequest","error","isSupported","stupidPjax"],"mappings":"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"}