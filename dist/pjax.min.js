!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Pjax=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Array.prototype.from||(Array.prototype.from=function(t){for(var e=[],o=t.length;o--;e.unshift(t[o]));return e});var o,n=function(t,e,o){return t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array?Array.prototype.from(t).forEach(function(t){return e.call(o,t)}):e.call(o,t)},i=function(t){return t.querySelectorAll(this.options.elements)},s=function(e){if(null===e||"object"!=t(e))return e;var o=e.constructor();for(var n in e)n in e&&(o[n]=e[n]);return o},r=function(){return window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/)},a=(o=0,function(){var t="pjax"+(new Date).getTime()+"_"+o;return o++,t});function l(){return{forEachEls:n,getElements:i,clone:s,isSupported:r,newUid:a}}function c(t,e,o,i){(e="string"==typeof e?e.split(" "):e).forEach(function(e){n(t,function(t){t.addEventListener(e,o,i)})})}function u(){this.options.debug&&this.options.logObject&&("function"==typeof this.options.logObject.log?this.options.logObject.log.apply(this.options.logObject,["PJAX ->",arguments]):this.options.logObject.log&&this.options.logObject.log(["PJAX ->",arguments]))}function h(t,e,o){(e="string"==typeof e?e.split(" "):e).forEach(function(e){var i;(i=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),i.eventName=e,o&&Object.keys(o).forEach(function(t){i[t]=o[t]}),n(t,function(t){var e=!1;t.parentNode||t===document||t===window||(e=!0,document.body.appendChild(t)),t.dispatchEvent(i),e&&t.parentNode.removeChild(t)})})}function p(t,e,o){var n=(e=e||{}).requestMethod||"GET",i=e.requestPayloadString||null,s=new XMLHttpRequest;return s.onreadystatechange=function(){4===s.readyState&&(200===s.status?o(s.responseText,s):o(null,s))},this.options.cacheBust&&(t+=(/[?&]/.test(t)?"&":"?")+(new Date).getTime()),s.open(n.toUpperCase(),t,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),null!=e.requestPayloadString&&""!=e.requestPayloadString&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(i),s}var d={outerHTML:function(t,e){t.outerHTML=e.outerHTML,this.onSwitch()},innerHTML:function(t,e){t.innerHTML=e.innerHTML,t.className=e.className,this.onSwitch()},sideBySide:function(t,e,o,n){var i=[],s=[],r=document.createDocumentFragment(),a="animationend webkitAnimationEnd MSAnimationEnd oanimationend",l=0,u=function(t){t.target==t.currentTarget&&--l<=0&&i&&(i.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)}),s.forEach(function(t){t.className=t.className.replace(t.getAttribute("data-pjax-classes"),""),t.removeAttribute("data-pjax-classes")}),s=null,i=null,this.onSwitch())}.bind(this);n=n||{},Array.from(t.childNodes).forEach(function(t){i.push(t),t.classList&&!t.classList.contains("js-Pjax-remove")&&(t.hasAttribute("data-pjax-classes")&&(t.className=t.className.replace(t.getAttribute("data-pjax-classes"),""),t.removeAttribute("data-pjax-classes")),t.classList.add("js-Pjax-remove"),n.callbacks&&n.callbacks.removeElement&&n.callbacks.removeElement(t),n.classNames&&(t.className+=" "+n.classNames.remove+" "+(o.backward?n.classNames.backward:n.classNames.forward)),l++,c(t,a,u,!0))}),Array.from(e.childNodes).forEach(function(t){if(t.classList){var e="";n.classNames&&(e=" js-Pjax-add "+n.classNames.add+" "+(o.backward?n.classNames.forward:n.classNames.backward)),n.callbacks&&n.callbacks.addElement&&n.callbacks.addElement(t),t.className+=e,t.setAttribute("data-pjax-classes",e),s.push(t),r.appendChild(t),l++,c(t,a,u,!0)}}),t.className=e.className,t.appendChild(r)}};Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),o=this,n=function(){},i=function(){return o.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i});var f="data-pjax-click-state",m="data-pjax-keyup-state",y=function(t,e){if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)t.setAttribute(f,"modifier");else if(t.protocol===window.location.protocol&&t.host===window.location.host)if(t.pathname===window.location.pathname&&t.hash.length>0)t.setAttribute(f,"anchor-present");else if(t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,""))t.setAttribute(f,"anchor");else if(t.href!==window.location.href.split("#")[0]+"#"){if(e.preventDefault(),this.options.currentUrlFullReload&&t.href===window.location.href.split("#")[0])return t.setAttribute(f,"reload"),void this.reload();this.options.requestOptions=this.options.requestOptions||{},t.setAttribute(f,"load"),this.loadUrl(t.href,s(this.options))}else t.setAttribute(f,"anchor-empty");else t.setAttribute(f,"external")},w=function(t){return t.defaultPrevented||!1===t.returnValue};var v="data-pjax-submit-state",b=function(t,e){this.options.requestOptions={requestUrl:t.getAttribute("action")||window.location.href,requestMethod:t.getAttribute("method")||"GET"};var o=document.createElement("a");if(o.setAttribute("href",this.options.requestOptions.requestUrl),o.protocol===window.location.protocol&&o.host===window.location.host)if(o.pathname===window.location.pathname&&o.hash.length>0)t.setAttribute(v,"anchor-present");else if(o.href!==window.location.href.split("#")[0]+"#")if(this.options.currentUrlFullReload)t.setAttribute(v,"reload");else{e.preventDefault();var n=[],i=[];for(var r in t.elements){var a=t.elements[r];if(a.name&&void 0!==a.attributes&&"button"!==a.tagName.toLowerCase()&&("checkbox"!==a.type&&"radio"!==a.type||a.checked)&&-1===n.indexOf(a.name)){if(n.push(a.name),"select"===String(a.nodeName).toLowerCase()&&1==a.multiple){var l=Array.from(a.options).map(function(t){return t.selected?t.value:null});return void i.push({name:encodeURIComponent(a.name),value:l})}i.push({name:encodeURIComponent(a.name),value:encodeURIComponent(a.value)})}}var c=i.map(function(t){return t.name+"="+t.value}).join("&");this.options.requestOptions.requestPayload=i,this.options.requestOptions.requestPayloadString=c,t.setAttribute(v,"submit"),this.loadUrl(o.href,s(this.options))}else t.setAttribute(v,"anchor-empty");else t.setAttribute(v,"external")},g=function(t){return t.defaultPrevented||!1===t.returnValue};var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t,e){t(e={exports:{}},e.exports)}(function(t){!function(e){var o=setTimeout;function n(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){var n;try{n=o(t._value)}catch(t){return void a(e.promise,t)}r(e.promise,n)}else(1===t._state?r:a)(e.promise,t._value)})):t._deferreds.push(e)}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if(e instanceof i)return t._state=3,t._value=e,void l(t);if("function"==typeof o)return void u((n=o,s=e,function(){n.apply(s,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){a(t,e)}var n,s}function a(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;e<o;e++)s(t,t._deferreds[e]);t._deferreds=null}function c(t,e,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=o}function u(t,e){var o=!1;try{t(function(t){o||(o=!0,r(e,t))},function(t){o||(o=!0,a(e,t))})}catch(t){if(o)return;o=!0,a(e,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var o=new this.constructor(n);return s(this,new c(t,e,o)),o},i.all=function(t){return new i(function(e,o){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,function(e){s(t,e)},o)}n[t]=r,0==--i&&e(n)}catch(t){o(t)}}for(var r=0;r<n.length;r++)s(r,n[r])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,o){o(t)})},i.race=function(t){return new i(function(e,o){for(var n=0,i=t.length;n<i;n++)t[n].then(e,o)})},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){o(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},t.exports?t.exports=i:e.Promise||(e.Promise=i)}(E)});function A(t){var e=this.options.mainScriptElement,o=t.text||t.textContent||t.innerHTML||"";if(this.log("Evaluating Script: ",t),o.match("document.write"))return console&&this.options.logObject.log&&this.options.logObject.log("Script contains document.write. Can’t be executed correctly. Code skipped ",t),!1;var n=t.src||"",i=t.parentNode||document.querySelector(e)||document.documentElement,s=document.createElement("script"),r=new Promise(function(t){if(s.type="text/javascript",""!=n&&(s.src=n,s.addEventListener("load",function(){t(n)}),s.async=!0),""!=o){try{s.appendChild(document.createTextNode(o))}catch(t){s.text=o}t("text-node")}});return this.log("ParentElement => ",i),i.appendChild(s),i.removeChild(s),["head","body"].indexOf(i.tagName.toLowerCase())>0||this.options.removeScriptsAfterParsing,r}function j(t,e,o,i){(e="string"==typeof e?e.split(" "):e).forEach(function(e){n(t,function(t){t.removeEventListener(e,o,i)})})}var x="data-pjax-click-state",S="data-pjax-keyup-state",k=function(t,e){if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)t.setAttribute(x,"modifier");else if(t.protocol===window.location.protocol&&t.host===window.location.host)if(t.pathname===window.location.pathname&&t.hash.length>0)t.setAttribute(x,"anchor-present");else if(t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,""))t.setAttribute(x,"anchor");else if(t.href!==window.location.href.split("#")[0]+"#"){if(e.preventDefault(),this.options.currentUrlFullReload&&t.href===window.location.href.split("#")[0])return t.setAttribute(x,"reload"),void this.reload();this.options.requestOptions=this.options.requestOptions||{},t.setAttribute(x,"load"),this.loadUrl(t.href,s(this.options))}else t.setAttribute(x,"anchor-empty");else t.setAttribute(x,"external")},U=function(t){return t.defaultPrevented||!1===t.returnValue};var O="data-pjax-click-state",P=function(t,e){this.options.requestOptions={requestUrl:t.getAttribute("action")||window.location.href,requestMethod:t.getAttribute("method")||"GET"};var o=document.createElement("a");if(o.setAttribute("href",this.options.requestOptions.requestUrl),o.protocol===window.location.protocol&&o.host===window.location.host)if(o.pathname===window.location.pathname&&o.hash.length>0)t.setAttribute(O,"anchor-present");else if(o.href!==window.location.href.split("#")[0]+"#")if(this.options.currentUrlFullReload)t.setAttribute(O,"reload");else{e.preventDefault();var n=[],i=[];for(var r in t.elements){var a=t.elements[r];a.name&&void 0!==a.attributes&&"button"!==a.tagName.toLowerCase()&&("checkbox"!==a.type&&"radio"!==a.type||a.checked)&&-1===n.indexOf(a.name)&&(n.push(a.name),i.push({name:encodeURIComponent(a.name),value:encodeURIComponent(a.value)}))}var l=i.map(function(t){return t.name+"="+t.value}).join("&");this.options.requestOptions.requestPayload=i,this.options.requestOptions.requestPayloadString=l,t.setAttribute(O,"submit"),this.loadUrl(o.href,s(this.options))}else t.setAttribute(O,"anchor-empty");else t.setAttribute(O,"external")},q=function(t){return t.defaultPrevented||!1===t.returnValue};return new function(){var t=function(){function t(e){var o=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.firstrun=!0,this.oUtilities=l(),this.oDomUtils=function(){var t=this;return{refresh:function(e){t.parseDOM(e||document)},reload:function(){window.location.reload()},foreachSelectors:function(t,e,o,i){i=i||document,t.forEach(function(t){n(i.querySelectorAll(t),e,o)})},unattach:function(e){n(t.getElements(e),function(t){j(t,"click"),j(t,"keyup")},t)}}}.apply(this),this.oParsers=function(){return{parseElementUnload:function(t){switch(t.tagName.toLowerCase()){case"a":t.hasAttribute("data-pjax-click-state")||this.unattachLink(t);break;case"form":t.hasAttribute("data-pjax-click-state")||this.unattachForm(t);break;default:throw"Pjax can only be applied on <a> or <form> submit"}},parseElement:function(t){switch(t.tagName.toLowerCase()){case"a":t.hasAttribute("data-pjax-click-state")||this.attachLink(t);break;case"form":t.hasAttribute("data-pjax-click-state")||this.attachForm(t);break;default:throw"Pjax can only be applied on <a> or <form> submit"}},parseDOMUnload:function(t){n(this.getElements(t),this.parseElementUnload,this)},parseDOM:function(t){n(this.getElements(t),this.parseElement,this)},parseOptions:function(t){this.options=t,this.options.elements=this.options.elements||"a[href], form[action]",this.options.reRenderCSS=this.options.reRenderCSS||!1,this.options.forceRedirectOnFail=this.options.forceRedirectOnFail||!1,this.options.scriptloadtimeout=this.options.scriptloadtimeout||1e3,this.options.mainScriptElement=this.options.mainScriptElement||"head",this.options.removeScriptsAfterParsing=this.options.removeScriptsAfterParsing||!0,this.options.logObject=this.options.logObject||console,this.options.latestChance=this.options.latestChance||null,this.options.selectors=this.options.selectors||["title",".js-Pjax"],this.options.switches=this.options.switches||{},this.options.switchesOptions=this.options.switchesOptions||{},this.options.history=this.options.history||!0,this.options.onDomDiffers=this.options.onDomDiffers||function(){return!0},this.options.pjaxErrorHandler=this.options.pjaxErrorHandler||function(){return!1},this.options.onJsonDocument=this.options.onJsonDocument||function(){return!0},this.options.analytics=this.options.analytics||function(){window._gaq&&window._gaq.push(["_trackPageview"]),window.ga&&window.ga("send","pageview",{page:location.pathname,title:document.title})},this.options.scrollTo=void 0===this.options.scrollTo?0:this.options.scrollTo,this.options.cacheBust=void 0===this.options.cacheBust||this.options.cacheBust,this.options.debug=this.options.debug||!1,this.options.switches.head||(this.options.switches.head=this.switchElementsAlt),this.options.switches.body||(this.options.switches.body=this.switchElementsAlt),"function"!=typeof t.analytics&&(t.analytics=function(){})}}}.apply(this),this.log=u,this.doRequest=p,this.getElements=this.oUtilities.getElements,this.parseElementUnload=this.oParsers.parseElementUnload,this.parseElement=this.oParsers.parseElement,this.parseDOM=this.oParsers.parseDOM,this.parseDOMUnload=this.oParsers.parseDOMUnload,this.refresh=this.oDomUtils.refresh,this.reload=this.oDomUtils.reload,this.isSupported=this.oUtilities.isSupported,this.attachLink=function(){var t=this;return function(e){c(e,"click",function(o){w(o)||y.call(t,e,o)}),c(e,"keyup",function(o){w(o)||(o.which>1||o.metaKey||o.ctrlKey||o.shiftKey||o.altKey?e.setAttribute(m,"modifier"):13==o.keyCode&&y.call(t,e,o))})}}.apply(this),this.attachForm=function(){var t=this;return function(e){c(e,"submit",function(o){g(o)||b.call(t,e,o)})}}.apply(this),this.unattachLink=function(){var t=this;return function(e){j(e,"click",function(o){U(o)||k.call(t,e,o)}),j(e,"keyup",function(o){U(o)||(o.which>1||o.metaKey||o.ctrlKey||o.shiftKey||o.altKey?e.setAttribute(S,"modifier"):13==o.keyCode&&k.call(t,e,o))})}}.apply(this),this.unattachForm=function(){var t=this;return function(e){j(e,"submit",function(t){q(t)||P.call(this,e,t)}),j(e,"keyup",function(o){q(o)||13==o.keyCode&&P.call(t,e,o)})}}.apply(this),this.updateStylesheets=function(){var t=this;return function(e,o){t.log("styleheets old elements",o),t.log("styleheets new elements",e),n(e,function(e){if(null!==Array.from(o).reduce(function(t,o){return t=o.href===e.href?o:t},null))t.log&&t.log("old stylesheet found not resetting");else{t.log&&t.log("new stylesheet => add to head");var n=document.getElementsByTagName("head")[0],i=document.createElement("link");i.setAttribute("href",e.href),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),n.appendChild(i)}})}}.apply(this),this.oParsers.parseOptions.apply(this,[e]),this.log("Pjax options",this.options),this.maxUid=this.lastUid=this.oUtilities.newUid(),this.parseDOM(document),c(window,"popstate",function(t){if(o.log("OPT -> ",state),t.state){var e=o.oUtilities.clone(o.options);e.url=t.state.url,e.title=t.state.title,e.history=!1,e.requestOptions={},o.log("OPT -> ",e),o.log("State UID",t.state.uid),o.log("lastUID",o.lastUid),t.state.uid<o.lastUid?e.backward=!0:e.forward=!0,o.lastUid=t.state.uid,o.loadUrl(t.state.url,e)}}),this}var o,i,s;return o=t,(i=[{key:"forEachSelectors",value:function(t,e,o){return oDomUtils.foreachSelectors(this.options.selectors,t,e,o)}},{key:"switchSelectors",value:function(t,e,o,i){return function(t,e,o,i,s,r){var a=this;o.forEach(function(o){var l=i.querySelectorAll(o),c=s.querySelectorAll(o);if((a.log&&a.log("Pjax switch",o,l,c),l.length!==c.length)&&r.onDomDiffers(s,i))throw"DOM doesn’t look the same on new loaded page: ’"+o+"’ - new "+l.length+", old "+c.length;n(l,function(n,i){var s=c[i];this.log&&this.log("newEl",n,"oldEl",s),t[o]?t[o].bind(this)(s,n,r,e[o]):d.outerHTML.bind(this)(s,n,r)},a)},this)}(this.options.switches,this.options.switchesOptions,t,e,o,i)}},{key:"latestChance",value:function(t){return window.location.href=t,!1}},{key:"onSwitch",value:function(){h(window,"resize scroll")}},{key:"loadContent",value:function(t,e){var o=this,i=function(){var t=this;return function(e){t.log("Executing scripts for ",e);var o=[];return void 0===e?Promise.resolve():("script"===e.tagName.toLowerCase()&&A.call(t,e),n(e.querySelectorAll("script"),function(e){e.type&&"text/javascript"!==e.type.toLowerCase()||o.push(A.call(t,e))},t),o)}}(),s=document.implementation.createHTMLDocument("pjax"),r=[Promise.resolve("basic resolve")],a=t.match(/<html[^>]+>/gi);a&&a.length&&(a=a[0].match(/\s?[a-z:]+(?:=(?:'|")[^'">]+(?:'|"))*/gi)).length&&(a.shift(),a.forEach(function(t){var e=t.trim().split("=");1===e.length?s.documentElement.setAttribute(e[0],!0):s.documentElement.setAttribute(e[0],e[1].slice(1,-1))}));var l=null;try{l=JSON.parse(t)}catch(t){this.log.warn("No JSON found. If ypu expected it there was an error")}if(s.documentElement.innerHTML=t,this.log("load content",s.documentElement.attributes,s.documentElement.innerHTML.length),null!==l&&(this.log("found JSON document",l),this.options.onJsonDocument.call(this,l)),document.activeElement&&!document.activeElement.value)try{document.activeElement.blur()}catch(t){}this.switchSelectors(this.options.selectors,s,document,e),!0===this.options.reRenderCSS&&this.updateStylesheets(s.querySelectorAll("link[rel=stylesheet]"),document.querySelectorAll("link[rel=stylesheet]"));var c=Array.prototype.slice.call(document.querySelectorAll("[autofocus]")).pop();c&&document.activeElement!==c&&c.focus(),this.options.selectors.forEach(function(t){o.oUtilities.forEachEls(document.querySelectorAll(t),function(t){r.push.apply(r,i(t))},o)}),this.log("waiting for scriptcomplete",r);var u=null;u=window.setTimeout(function(){h(document,"pjax:scriptcomplete pjax:scripttimeout",e),u=null},this.options.scriptloadtimeout),Promise.all(r).then(function(){null!==u&&(window.clearTimeout(u),h(document,"pjax:scriptcomplete pjax:scriptsuccess",e))},function(){null!==u&&(window.clearTimeout(u),h(document,"pjax:scriptcomplete pjax:scripterror",e))})}},{key:"loadUrl",value:function(t,e){var o=this;this.log("load href",t,e),h(document,"pjax:send",e),this.doRequest(t,e.requestOptions,function(n,i){if(!1===n||200!==i.status)return h(document,"pjax:complete pjax:error",{options:e,requestData:i,href:t}),e.pjaxErrorHandler(t,e,i);document.activeElement.blur();try{o.loadContent(n,e)}catch(n){if(o.options.debug){if(o.options.forceRedirectOnFail)return e.pjaxErrorHandler(t,e,i)||o.latestChance(t);throw n}return console&&o.options.logObject.error&&o.options.logObject.error("Pjax switch fail: ",n),e.pjaxErrorHandler(t,e,i)||o.latestChance(t)}e.history&&(o.firstrun&&(o.lastUid=o.maxUid=oUtilities.newUid(),o.firstrun=!1,window.history.replaceState({url:window.location.href,title:document.title,uid:o.maxUid},document.title)),o.lastUid=o.maxUid=oUtilities.newUid(),window.history.pushState({url:t,title:e.title,uid:o.maxUid},e.title,t)),o.forEachSelectors(function(t){return o.parseDOM(t)}),h(document,"pjax:complete pjax:success",e),e.analytics(),!1!==e.scrollTo&&(e.scrollTo.length>1?window.scrollTo(e.scrollTo[0],e.scrollTo[1]):window.scrollTo(0,e.scrollTo))})}}])&&e(o.prototype,i),s&&e(o,s),t}();if(!l().isSupported()){var o=function(){};for(var i in t.prototype)i in t.prototype&&"function"==typeof t.prototype[i]&&(o[i]=o);return o}return t}});
